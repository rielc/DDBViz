<!DOCTYPE html>
<head>
<meta charset="utf-8">
  <link rel="stylesheet" href="./css/d3.tip.css">
  <link rel="stylesheet" href="./css/style.css">
  <title>Deutsche Digitale Bibliothek visualisiert - Netzwerke</title>
</head>
<body>
<div id="overlay">
  <svg></svg>
</div>
<svg id="network">
  <g id="links"></g>
  <g id="nodes"></g>
</svg>
<div class="header">
  <div class="container">
    <h1>Deutsche Digitale Bibliothek <span>visualisiert</span></h1>
    <div class="menu">
      <span><a href="../">Start</a></span>
      <span><a href="../epochen/">Epochen</a></span>
      <span><a href="../stichworte/">Stichworte</a></span>
      <span><a href="../orte/">Orte</a></span>
      <span><a href="../netzwerke/" class="active">Netzwerke</a></span>
    </div>
  </div>
</div>
<div class="subheader">
  <div class="container">
    <h1>Ein Netzwerk aus den aktivsten Personen und Organisationen <span id="preposition"> im</span><span id="time-facet-name"></span><img style="float:right;display:block;" src="./images/icons/info.svg" class="help" width="20"  height="20" />
</h1>
    <p class="timeline-tip">
      <img src="./images/arrow-02.svg" class="left-arrow"/><svg id="timeline"></svg><img src="./images/arrow-01.svg" class="right-arrow"/>
    </p>
    <p id="description"> Visualisiert werden die 500 aktivsten Personen und Organisationen einer Epoche und Ihre Kollaboratoren.<br />Eine Person muss mindestens 20 Eintr√§ge vorweisen, damit sie vorkommt.</p>
  </div>
</div>

<script src="../js/d3.v3.min.js"></script>
<script src="../js/underscore.js"></script>
<script src="../js/jquery-2.1.1.min.js"></script>
<script src="../js/d3.tip.js"></script>
<script src="./js/DDBAffiliateNetwork.js"></script>
<script type="text/javascript">

  $(document).ready( function() {

    an = new DDBAffiliateNetwork();
    an.init();

    $('#time-fct').change( function() {
      an.parameters.timeFct = $(this).find('option:selected').val();
      an.load();
    });

    $( window ).resize(function() {
      an.resizeWindow();
    });

    $( ".left-arrow" ).click(function() {
      if (an.currentTimeFctID > 0) {
        an.currentTimeFctID--;
        console.log(an.currentTimeFctID + " - " +an.currentTimeFctID+1);
        an.collectNewNodes(an.currentTimeFctID, an.currentTimeFctID+1);
        d3.selectAll(".time-facet-labels").style("fill", "#d2d2d2");
        d3.selectAll(".time-facet-ticks").style("fill", "#d2d2d2");
        d3.select(".time-facet-label-"+an.timeFcts[an.currentTimeFctID]).style("fill", "#bf8f9f");
        d3.select(".time-facet-tick-"+an.timeFcts[an.currentTimeFctID]).style("fill", "#bf8f9f");
        d3.select(".extent").attr("width", an.brushWidth);
        d3.select(".extent").attr("x", an.brushScale(an.currentTimeFctID));
      }
    });

    $( ".right-arrow" ).click(function() {
      if (an.currentTimeFctID < an.timeFcts.length-1) {
        an.currentTimeFctID++;
        an.collectNewNodes(an.currentTimeFctID, an.currentTimeFctID+1);
        d3.selectAll(".time-facet-labels").style("fill", "#d2d2d2");
        d3.selectAll(".time-facet-ticks").style("fill", "#d2d2d2");
        d3.select(".time-facet-label-"+an.timeFcts[an.currentTimeFctID]).style("fill", "#bf8f9f");
        d3.select(".time-facet-tick-"+an.timeFcts[an.currentTimeFctID]).style("fill", "#bf8f9f");
        d3.select(".extent").attr("width", an.brushWidth);
        d3.select(".extent").attr("x", an.brushScale(an.currentTimeFctID));
      }
    });

  });

</script>
</body>
</html>